{% extends 'base.html' %}
{% block content %}
<style>
.header-footer-center {
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
}
.hero-bg {
  background: linear-gradient(rgba(34, 49, 63, 0.7), rgba(34, 49, 63, 0.7)), url('https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
  color: #fff;
  padding: 32px 0 24px 0;
  border-radius: 0 0 1.5rem 1.5rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.10);
  width: 100%;
  margin: 60px auto 0 auto;
}
@media (max-width: 900px) {
  .header-footer-center, .hero-bg { max-width: 100%; }
}
@media (max-width: 768px) {
  .hero-bg { padding: 18px 0 12px 0; border-radius: 0 0 1rem 1rem; margin-top: 40px; }
  .hero-bg h1 { font-size: 2rem; }
  .hero-bg .img-fluid { max-height: 100px; }
}
.fade-in { animation: fadeIn 1.2s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: none; } }
.card-hover:hover { box-shadow: 0 8px 32px rgba(44, 130, 201, 0.2); transform: scale(1.03); transition: 0.3s; }
.btn-animated { transition: background 0.3s, color 0.3s, box-shadow 0.3s; }
.btn-animated:hover { background: #2a7cff; color: #fff; box-shadow: 0 4px 16px rgba(42,124,255,0.15); }
</style>
  <div class="header-footer-center">
    <div class="hero-bg mb-4 fade-in">
      <div class="header-footer-center">
        <div class="row align-items-center justify-content-center">
          <div class="col-md-8">
            <h1 class="fw-bold mb-2 text-primary text-center" style="font-size:2.2rem;">Language Learning League</h1>
            <p class="lead mb-3 text-center">Compete, learn, and track your progress in multiple languages. Earn badges, certificates, and join a vibrant community!</p>
            <div class="d-flex gap-2 mb-2 justify-content-center">
              <!-- Removed broken links for league_leaderboard and student_performance -->
            </div>
            <div class="d-flex gap-3 mt-2 justify-content-center">
              <span class="badge bg-primary"><i class="bi bi-award"></i> Certificates</span>
              <span class="badge bg-warning text-dark"><i class="bi bi-star"></i> Badges</span>
              <span class="badge bg-success"><i class="bi bi-people"></i> Community</span>
            </div>
          </div>
          <div class="col-md-4 text-center">
            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Learning" class="img-fluid" style="max-height:120px; filter: drop-shadow(0 4px 16px #222);">
          </div>
        </div>
      </div>
    </div>
    <!-- Age Categories Section (now correctly placed) -->
    <div class="fade-in mb-4">
      <h2 class="text-center fw-bold" style="color:#00b8ff;margin-bottom:24px;">Choose Your Age Group</h2>
      <div class="d-flex justify-content-center gap-3 mb-3">
        {% for group in age_groups %}
        <button class="kids-btn" style="min-width:120px;max-width:180px;" onclick="showCourses('{{ group.id }}')" id="age-btn-{{ group.id }}">{{ group.name }}</button>
        {% endfor %}
      </div>
    </div>
    <div id="course-catalog">
      {% for group in age_groups %}
      <div class="age-courses" id="courses-{{ group.id }}" style="display:none;">
        <h3 class="text-center" style="color:#00b8ff;margin-bottom:16px;">Courses for {{ group.name }}</h3>
        <div class="row mb-3 justify-content-center">
          <div class="col-md-6 col-12">
            <input type="text" class="form-control" placeholder="Search courses..." onkeyup="filterAgeCourses('{{ group.id }}', this.value)">
          </div>
        </div>
        <div class="row g-3 justify-content-center" id="course-list-{{ group.id }}">
          {% for course in courses|dictsort:"order" %}
            {% if course.age_group.id == group.id %}
              {% if course.name|lower == 'colors and shapes' and group.name|lower == 'age 3 to 6' %}
              <div class="col-md-6 col-12 course-item-{{ group.id }}">
                <div class="card h-100 shadow-lg border-0 card-hover" style="background: linear-gradient(135deg, #ffe066 60%, #a3cef1 100%);">
                  <div class="card-body text-center">
                    <h5 class="card-title fw-bold mb-2" style="font-size:1.5rem;color:#2d6a4f;"><i class="bi bi-palette" style="color:#ff595e;"></i> Colors & Shapes</h5>
                    <span class="badge bg-warning text-dark" style="font-size:1rem;">Fun Visuals</span>
                    <span class="badge bg-info" style="font-size:1rem;">{{ course.subject.name }}</span>
                    <span class="badge bg-success" style="font-size:1rem;">{{ course.level }}</span>
                    <p class="mt-3" style="font-size:1.1rem;">{{ course.description }}</p>
                    <a href="{% url 'course_detail' course.id %}" class="btn btn-primary btn-lg btn-animated mt-2">View Details</a>
                  </div>
                </div>
              </div>
              {% else %}
              <div class="col-md-4 col-12 course-item-{{ group.id }}">
                <div class="card h-100 shadow-sm border-0 card-hover">
                  <div class="card-body">
                    <h5 class="card-title fw-bold mb-1"><i class="bi bi-book"></i> {{ course.name }}</h5>
                    <span class="badge bg-info">{{ course.subject.name }}</span>
                    <span class="badge bg-secondary">{{ course.level }}</span>
                    <p class="mt-2">{{ course.description }}</p>
                    <a href="{% url 'course_detail' course.id %}" class="btn btn-outline-primary btn-sm btn-animated">View Details</a>
                  </div>
                </div>
              </div>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <script>
      function showCourses(groupId) {
        document.querySelectorAll('.age-courses').forEach(function(el) { el.style.display = 'none'; });
        document.querySelectorAll('.kids-btn').forEach(function(btn) { btn.classList.remove('active'); });
        document.getElementById('courses-' + groupId).style.display = 'block';
        document.getElementById('age-btn-' + groupId).classList.add('active');
      }
      function filterAgeCourses(groupId, search) {
        search = search.toLowerCase();
        document.querySelectorAll('.course-item-' + groupId).forEach(function(card) {
          var title = card.querySelector('.card-title').textContent.toLowerCase();
          card.style.display = title.includes(search) ? '' : 'none';
        });
      }
      document.addEventListener('DOMContentLoaded', function() {
        var first = document.querySelector('.age-courses');
        if (first) first.style.display = 'block';
        var firstBtn = document.querySelector('.kids-btn');
        if (firstBtn) firstBtn.classList.add('active');
      });
    </script>
  <!-- end age group course catalog -->
  <!-- Only one Language Learning League card above age categories section -->
  <div class="header-footer-center fade-in">
    <div class="row mb-4 justify-content-center">
      <div class="col-md-6">
        <h3 class="mb-2 text-secondary text-center">Languages</h3>
        <div class="row g-2 justify-content-center">
          {% for language in languages %}
          <div class="col-6">
            <div class="card h-100 shadow-sm border-0 card-hover">
              <div class="card-body text-center">
                <h5 class="card-title fw-bold mb-1"><i class="bi bi-translate"></i> {{ language.name }}</h5>
                <a href="{% url 'challenge_list' language.id %}" class="btn btn-primary btn-sm btn-animated">Start Challenges</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
  <!-- Removed old courses section below search -->
    </div>
    <div class="row mt-3 justify-content-center">
      <div class="col-12">
        <div class="alert alert-info text-center py-2">
          <strong>Tip:</strong> Track your progress, earn badges, and download certificates as you complete courses!
        </div>
      </div>
    </div>
    <div class="row mt-4 justify-content-center">
      <div class="col-md-8 mx-auto">
        <div class="card border-0 shadow-sm p-3 text-center bg-light">
          <h4 class="mb-2 text-success"><i class="bi bi-chat-quote"></i> What Our Learners Say</h4>
          <blockquote class="blockquote mb-0">
            <p>"This platform made learning fun and competitive! I love earning badges and certificates."</p>
            <footer class="blockquote-footer">A. Student, <cite title="Source Title">Spanish League</cite></footer>
          </blockquote>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function filterCourses() {
  var input = document.getElementById('courseSearch');
  var filter = input.value.toLowerCase();
  var cards = document.getElementsByClassName('course-card');
  for (var i = 0; i < cards.length; i++) {
    var title = cards[i].querySelector('.card-title').textContent.toLowerCase();
    cards[i].style.display = title.includes(filter) ? '' : 'none';
  }
}
</script>
{% endblock %}
