{% extends 'base.html' %}
{% block content %}
<div class="color-game-root">
    <h1 class="game-title">Leaderboard</h1>
    <div id="achievements-container" style="margin-bottom:16px; text-align:center;"></div>
    <div id="leaderboard-container" style="margin-bottom:16px; text-align:center;"></div>
    <a href="/kids/color-mixing-game/" class="game-btn">Back to Game</a>
</div>
<script>
function showAchievements() {
    let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
    let sorted = leaderboard.sort((a,b)=>b.score-a.score);
    let html = '<h3>Achievements</h3>';
    if (sorted.length > 0) {
        html += '<div style="font-size:1.2em; margin-bottom:8px;"><span class="achievement-badge">ðŸ¥‡</span> Top Player: <b>' + (sorted[0].name || 'Player') + '</b></div>';
    }
    if (sorted.length > 1) {
        html += '<div style="font-size:1.1em; margin-bottom:8px;"><span class="achievement-badge">ðŸ¥ˆ</span> Second Place: <b>' + (sorted[1].name || 'Player') + '</b></div>';
    }
    if (sorted.length > 2) {
        html += '<div style="font-size:1em; margin-bottom:8px;"><span class="achievement-badge">ðŸ¥‰</span> Third Place: <b>' + (sorted[2].name || 'Player') + '</b></div>';
    }
    document.getElementById('achievements-container').innerHTML = html;
}

function showLeaderboard() {
    let leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
    let html = '<h3>All Players</h3>';
    let sorted = leaderboard.sort((a,b)=>b.score-a.score);
    if (sorted.length === 0) {
        html += '<div style="color:#d90429;font-weight:bold;font-size:1.1em;margin:12px 0;">No scores yet!<br>Finish the game to add your name and score.</div>';
    } else {
        html += '<table style="margin:0 auto; border-collapse:collapse; width:90%;"><thead><tr style="background:#ffd60a22;"><th style="padding:8px;">Rank</th><th style="padding:8px;">Player</th><th style="padding:8px;">Score</th><th style="padding:8px;">Date</th></tr></thead><tbody>';
        sorted.forEach((s,i)=>{
            let badge = '';
            if (i === 0) badge = ' ðŸ¥‡';
            else if (i === 1) badge = ' ðŸ¥ˆ';
            else if (i === 2) badge = ' ðŸ¥‰';
            html += `<tr style="border-bottom:1px solid #eee;"><td style="padding:8px;">${i+1}${badge}</td><td style="padding:8px;">${s.name || 'Player'}</td><td style="padding:8px;">${s.score}</td><td style="padding:8px; font-size:0.95em; color:#888;">${new Date(s.date).toLocaleString()}</td></tr>`;
        });
        html += '</tbody></table>';
    }
    document.getElementById('leaderboard-container').innerHTML = html;
}
window.onload = function() {
    showAchievements();
    showLeaderboard();
};
</script>
<style>
body {
    background: linear-gradient(120deg, #fceabb 0%, #f8b500 100%);
    min-height: 100vh;
    animation: bgMove 10s linear infinite alternate;
}
@keyframes bgMove {
    0% { background-position: 0 0; }
    100% { background-position: 100vw 100vh; }
}
.color-game-root {
    max-width: 500px;
    margin: 40px auto;
    background: linear-gradient(135deg,#fffbe7 0%,#e0f7fa 100%);
    border-radius: 24px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.18);
    padding: 44px 28px;
    font-family: 'Baloo 2', 'Comic Sans MS', 'Comic Sans', cursive;
    position: relative;
    overflow: hidden;
}
.game-title {
    text-align: center;
    color: #ff9800;
    font-size: 2.6em;
    margin-bottom: 22px;
    font-weight: bold;
    letter-spacing: 2px;
    text-shadow: 2px 2px 0 #ffd60a, 0 4px 12px #ff980044;
    font-family: 'Luckiest Guy', 'Baloo 2', cursive;
}
.game-btn {
    background: linear-gradient(90deg,#ff9800 60%,#ffd60a 100%);
    color: #fff;
    border: none;
    border-radius: 14px;
    padding: 12px 36px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    margin: 14px 10px;
    box-shadow: 0 4px 16px #ffd60a44;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    animation: btnBounce 2s infinite alternate;
    display:inline-block;
    text-decoration:none;
}
.game-btn:hover {
    background: linear-gradient(90deg,#ffd60a 60%,#ff9800 100%);
    transform: scale(1.08) rotate(-2deg);
    box-shadow: 0 8px 24px #ffd60a88;
}
@keyframes btnBounce {
    0% { transform: scale(1); }
    100% { transform: scale(1.04) rotate(-2deg); }
}
.achievement-badge {
    display: inline-block;
    font-size: 1.5em;
    margin: 0 8px;
    animation: sparkle 1.2s infinite alternate;
}
@keyframes sparkle {
    0% { filter: brightness(1.2) drop-shadow(0 0 6px #ffd60a); }
    100% { filter: brightness(1.6) drop-shadow(0 0 16px #ffd60a); }
}
@media (max-width: 600px) {
    .color-game-root { max-width: 98vw; padding: 16px 4vw; margin: 12px auto; }
    .game-title { font-size: 1.6em; }
    .game-btn { font-size: 1em; padding: 8px 18px; }
}
</style>
{% endblock %}
