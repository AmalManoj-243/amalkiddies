
{% extends 'users/basic.html' %}
{% block content %}

{% extends 'users/basic.html' %}
{% block content %}
<div class="container py-5" style="background:#222; border-radius:32px; box-shadow:0 12px 40px rgba(0,0,0,0.7); max-width:900px;">
  <h2 class="mb-4 text-center" style="color:#1db954; font-weight:800; letter-spacing:2px; text-shadow:0 2px 12px #1db95433;">Upload Your Music</h2>
  <form method="post" enctype="multipart/form-data" class="mb-5 p-4" style="background:#181818; border-radius:20px; box-shadow:0 4px 24px rgba(29,185,84,0.12);">
    {% csrf_token %}
    <div class="row">
      <div class="col-md-6">
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Title</label>
          {{ form.title|as_widget(attrs={'class':'form-control bg-dark text-white border-0', 'placeholder':'Track Title'}) }}
        </div>
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Artist</label>
          {{ form.artist|as_widget(attrs={'class':'form-control bg-dark text-white border-0', 'placeholder':'Artist Name'}) }}
        </div>
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Album</label>
          {{ form.album|as_widget(attrs={'class':'form-control bg-dark text-white border-0', 'placeholder':'Album Name'}) }}
        </div>
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Genre</label>
          {{ form.genre|as_widget(attrs={'class':'form-control bg-dark text-white border-0', 'placeholder':'Genre'}) }}
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Audio File</label>
          {{ form.audio_file|as_widget(attrs={'class':'form-control-file bg-dark text-white border-0'}) }}
        </div>
        <div class="form-group mb-3">
          <label style="color:#ffd700; font-weight:700;">Cover Image</label>
          {{ form.cover_image|as_widget(attrs={'class':'form-control-file bg-dark text-white border-0'}) }}
        </div>
      </div>
    </div>
    <div class="text-center">
      <button type="submit" class="btn btn-success px-5 py-2 mt-3" style="background:linear-gradient(90deg,#1db954 60%,#43a047 100%); border:none; font-weight:700; font-size:1.1rem; border-radius:24px; box-shadow:0 2px 8px rgba(29,185,84,0.18); transition:background 0.2s;">Upload</button>
    </div>
  </form>
  <h3 class="mt-5 mb-4 text-center" style="color:#ffd700; font-weight:800; letter-spacing:2px; text-shadow:0 2px 12px #ffd70033;">Your Uploaded Tracks</h3>
  <div class="row justify-content-center">
    {% for track in user_tracks %}
      <div class="col-md-5 mb-4">
        <div class="music-card" style="background:#181818; border-radius:20px; box-shadow:0 8px 32px rgba(29,185,84,0.10); padding:24px; transition:transform 0.2s, box-shadow 0.2s; cursor:pointer; animation:fadeInCard 0.7s forwards;">
          {% if track.cover_image %}
            <img src="{{ track.cover_image.url }}" alt="Cover" style="width:100px; height:100px; border-radius:16px; object-fit:cover; margin-bottom:16px; box-shadow:0 2px 12px rgba(0,0,0,0.18);">
          {% endif %}
          <div class="music-info" style="text-align:center; font-family:'Montserrat','Segoe UI',Arial,sans-serif;">
            <h5 style="color:#1db954; font-weight:700; font-size:1.2rem;">{{ track.title }}</h5>
            <p style="color:#fff; font-size:1rem;">{{ track.artist }}{% if track.album %} | {{ track.album }}{% endif %}{% if track.genre %} | {{ track.genre }}{% endif %}</p>
          </div>
          <audio controls src="{{ track.audio_file.url }}" style="width:100%; margin-bottom:10px; border-radius:8px; background:#222;"></audio>
          <p class="text-muted" style="font-size:13px;">Uploaded: {{ track.uploaded_at }}</p>
        </div>
      </div>
    {% empty %}
      <p class="ml-3 text-center" style="color:#fff;">No tracks uploaded yet.</p>
    {% endfor %}
  </div>
</div>
<style>
@keyframes fadeInCard {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
{% endblock %}
